(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{EbD0:function(e,t,o){"use strict";var r=o("pVnL"),a=o.n(r),i=o("gcR/"),n=o.n(i),s=(o("3bBZ"),o("LvDl")),l=o("q1tI"),d=o.n(l),c=o("J9+s"),u=o("G+Ai"),p=o("CQbt"),g=o("VhAz"),m=o("FkPB"),b=o("QcDD"),f=o("bPtJ"),v=o("G4cA"),y=o("mF3+"),h=o("9Oom"),M=o("IYZQ"),F=o("qqdV"),S=o("zmp8"),_=o("5/WK");function w(e){const{onSubmit:t,children:o,submitType:r}=e,a="create-bot"===r||"create-integration"===r;return n()("form",{id:"developer-integration-form",style:{minWidth:200,maxWidth:440,marginLeft:24,display:"flex",flexDirection:"column"},onSubmit:e=>{e.preventDefault(),"create-integration"===r?_.a.setState({open:!0,title:n()(c.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.title",defaultMessage:"Switch to Public integration?"}),message:n()(c.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.message",defaultMessage:"You‘ll get an OAuth secret and will need to implement OAuth for authorization. See <oauthdocumentationlink>developer docs</oauthdocumentationlink> for more information.",values:{oauthdocumentationlink:(...e)=>n()(M.a,{href:F.d.developerOAuthDocs},void 0,e)}}),onConfirm:()=>{t()}}):t()}},void 0,o,n()("div",{style:{display:"flex",marginTop:24,flexDirection:"row-reverse",alignItems:"center"}},void 0,n()(h.a,{onClick:()=>{const e=document.querySelector("form#developer-integration-form");if(e){const t=e.ownerDocument.createElement("input");t.style.display="none",t.type="submit",e.appendChild(t).click(),e.removeChild(t)}}},void 0,n()(I,{isCreate:a})),a&&n()("span",{style:{fontSize:15,color:S.h.frontTextLight,marginRight:42}},void 0,n()(c.FormattedMessage,{id:"developerIntegrationFormHandler.create.developerTerms",defaultMessage:"By submitting, you agree to Notion's <developertermslink>Developer Terms</developertermslink>.",values:{developertermslink:(...e)=>n()(M.a,{href:F.d.developerTerms},void 0,e)}}))))}function I(e){const{isCreate:t}=e;return t?d.a.createElement(d.a.Fragment,null,n()("div",{style:{marginRight:4}},void 0,n()(c.FormattedMessage,{id:"formHandler.submitButton.create.label",defaultMessage:"Submit"})),y.a.arrowRight({width:14,height:14})):n()(c.FormattedMessage,{id:"formHandler.submitButton.create.update",defaultMessage:"Save changes"})}var k=o("yNyh"),O=o("Zo/l"),T=o("aZ00"),B=o("MeYt"),C=o("LeVO"),j=o("Sb6f");function R(e){const{fetchSecret:t,secretName:o,onCopy:r,onError:a,confirmationModalProps:i,hasSecretBeenViewed:s}=e,l=Object(O.b)(),[c,u]=d.a.useState();return n()(k.b,{type:c?"text":"password",disabled:!0,style:{fontFamily:j.a.fontFamily.mono,color:S.h.frontTextMedium},inputStyle:c?{cursor:"text"}:void 0,value:c||" ".repeat(40),right:n()("div",{style:{display:"flex"}},void 0,n()("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),c?n()(V,{secretName:o,onClick:()=>{r&&r(),Object(T.c)({environment:l,stringValue:c})}}):n()(N,{hasSecretBeenViewed:s,onClick:async()=>{const e=async()=>{const e=await t();"secret"in e?u(e.secret):a(e.error.body.message)};i?_.a.setState({...i,open:!0,onConfirm:e}):await e()}}))})}function N(e){const{onClick:t,hasSecretBeenViewed:o}=e;return n()(B.a,{onClick:t,style:x.button},void 0,n()(c.FormattedMessage,o?{id:"formSecretShow.refreshSecret.label",defaultMessage:"Refresh"}:{id:"formSecretShow.showSecret.label",defaultMessage:"Show"}))}function V(e){const{onClick:t,secretName:o}=e,[r,i]=d.a.useState(!1),s=n()(c.FormattedMessage,r?{defaultMessage:"{secretName} copied",id:"formSecretShow.secretCopied.tooltip",description:"Tooltip shown when user copied integration secret to clipboard",values:{secretName:o}}:{defaultMessage:"Copy {secretName}",id:"formSecretShow.copySecret.tooltip",description:"Shortcut for copying a token from an integration management page; 'secretName' will be either 'secret' or 'token'",values:{secretName:o}});return n()(C.a,{placement:C.a.Placement.Top,renderTooltip:()=>s,render:e=>d.a.createElement(B.a,a()({onClick:e=>{e.preventDefault(),i(!0),setTimeout(()=>{i(!1)},1500),t()}},e,{style:{...x.button,color:r?S.h.mediumTextColor:S.h.blue}}),n()(c.FormattedMessage,r?{id:"formSecretShow.copied.label",defaultMessage:"Copied"}:{id:"formSecretShow.copySecret.label",defaultMessage:"Copy"}))})}const x={button:{display:"inline-flex",alignItems:"center",fontFamily:j.a.fontFamily.sans,borderRadius:3,padding:"0 6px",height:24,color:S.h.blue}};var E=o("bkwR"),D=o("PHZn"),A=o("oYg8"),P=o("IULH"),q=o("aEEb");function z(e){const{options:t,value:o,setValue:r}=e;return n()("div",{style:{display:"flex",flexDirection:"column"}},void 0,t.map((e,a)=>n()(L,{option:e,value:o,setValue:r,isFirst:0===a,isLast:a===t.length-1},e.key)))}function L(e){const{option:t,value:o,setValue:r,isFirst:a,isLast:i}=e,s=Object(D.a)(e=>({outliner:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"auto",padding:18,whiteSpace:"normal",fontSize:15,background:e.whiteButtonBackground,borderTopLeftRadius:a?3:0,borderTopRightRadius:a?3:0,borderBottomLeftRadius:i?3:0,borderBottomRightRadius:i?3:0,...!a&&{borderTop:void 0}}}),[a,i]);return n()(P.a,{onClick:()=>r(t.key),style:s.outliner},void 0,n()(A.a,{title:t.title,isSelected:o===t.key,onClick:()=>{}},t.key),n()(q.a,{isMultiline:!0,isSecondaryColor:!0,style:{marginLeft:24,marginTop:-4,fontSize:15}},void 0,t.caption))}var U=o("1y3T"),W=o("2m/B"),G=o("p+Y9"),H=o("wlCD");function Z(e){const{value:t,setValue:o,setError:r}=e,a=Object(O.b)(),[i,s]=d.a.useState(!1);return d.a.createElement(d.a.Fragment,null,t&&n()(U.a,{url:t,isAuthenticated:!1,stripGoogleIconQuery:!0,width:90,render:(e,t)=>n()("div",{style:{width:90,height:90}},void 0,n()(W.a,{src:t,style:{width:90,height:90,objectFit:"cover",borderRadius:3}}))}),n()(P.a,{isLarge:!0,style:{width:"fit-content",backgroundColor:"white"},onClick:()=>{Object(G.c)({environment:a,onStart:()=>s(!0),bucket:"public",onError:e=>{r(e.message),s(!1)},onComplete:e=>{o(e[0]),s(!1)},accept:"image/*"})}},void 0,n()(c.FormattedMessage,{id:"formInputIcon.uploadButton.label",defaultMessage:"Upload image"}),i&&n()(H.a,{style:{marginLeft:4}})))}var Y=o("wXH4"),J=o("WgIs"),Q=o("gbGO"),K=o("2Y+N");function X(e){const{value:t}=e,[o,r]=d.a.useState(!1),i=()=>r(!1);return n()(Y.a,{popupType:Y.a.PopupType.Popup,alignmentToOrigin:Y.a.Alignment.Start,placementToOrigin:Y.a.Placement.Bottom,originGap:2,sameWidthAsOrigin:!0,open:o,onDismiss:i,render:()=>d.a.createElement(ee,a()({},e,{value:t,onClose:i})),origin:d.a.createElement($,a()({},e,{value:t,onClick:()=>r(!0)}))})}function $(e){const{onClick:t,value:o,renderMenuItem:r}=e,a=Object(D.a)(e=>({dropdown:{background:e.whiteButtonBackground,border:"1px solid ".concat(e.outlineButtonBorder),borderRadius:3,height:32},expandIcon:{height:12,width:12,fill:e.lightIconColor}}),[]);return d.a.createElement(d.a.Fragment,null,r({item:o,focused:!1,onClick:t,style:a.dropdown,right:y.a.expand(a.expandIcon)}))}function ee(e){const{keyName:t,items:o,value:r,setValue:a,renderMenuItem:i,onClose:s}=e;let l=0;const c=o.map((e,t)=>(e.id===(null==r?void 0:r.id)&&(l=t),{key:e.id,action:()=>{a(e),s()},render:t=>i({...t,item:e})}));return n()(Q.b,{menuType:Q.b.MenuType.Popup},void 0,n()(J.a,{type:J.a.Type.Vertical,initialFocus:l,sections:[{key:"form-input-section-".concat(t),items:c,render:e=>d.a.createElement(K.a,e)}]}))}var te=o("qX+M"),oe=o("SR/M"),re=o("Oy36"),ae=o("OxuQ");var ie=d.a.forwardRef((e,t)=>{const{item:o,...r}=e,i=Object(O.b)();return d.a.createElement(oe.a,a()({},r,{ref:t,title:o&&n()(ae.a,{store:o}),icon:o&&n()(re.a,{disabled:!0,icon:Object(te.getSpaceIcon)(i,o),title:Object(te.getSpaceName)(i,o),isEmptyPage:!1,size:19})}))}),ne=o("y6Dp"),se=o("V+m5"),le=o("iz/I");function de(e){const{label:t,subtitle:o,error:r,children:a}=e,i=Object(D.a)(()=>({label:{fontSize:15,fontWeight:j.a.fontWeight.medium,color:S.h.frontTextMedium},subtitle:{fontSize:15,color:S.h.frontTextLight},error:{marginTop:4,fontSize:15,color:S.h.frontRed},field:{display:"grid",gridTemplateColumns:"1fr",gap:6,marginBottom:32}}),[]);return n()("label",{style:i.field},void 0,n()("div",{style:i.label},void 0,t),a,o&&n()("div",{style:i.subtitle},void 0,o),r&&n()("div",{style:i.error},void 0,r))}var ce=o("FUUC"),ue=o("S1wt"),pe=o("0CAA"),ge=o("VBxf"),me=o("7M94");function be(e){const{integrationFormStore:t,onCreateNew:o,shouldAutoFocusFirstField:r}=e,a=Object(O.b)(),[{currentUserRootStore:i}]=Object(m.b)(b.default),u=Object(m.c)(t),{type:p}=u,[f,v]=d.a.useReducer(le.e,le.d);Object(l.useEffect)(()=>{if(!i)return;const e=Object(le.h)({formStoreState:u,userRootStore:i});for(const t of Object(g.c)(e))v({field:t,value:e[t]})},[u,i]);const y=Object(m.a)(()=>i?i.getAdminSpaceStores():[],[i]),h=s.debounce(()=>{const e=Object(le.g)({formData:f,formStateType:p});e.forEach(e=>{v({field:e,error:n()(c.FormattedMessage,{id:"developerIntegrationsForm.error.missingRequired",defaultMessage:"{ fieldName } is required.",values:{fieldName:le.b[e].label}})})});const t=Object(le.f)({formData:f,formStateType:p});if(t.forEach(e=>{v({field:e,error:n()(c.FormattedMessage,{id:"developerIntegrationsCreateInternal.error.invalidInput",defaultMessage:"{ fieldName } is invalid.",values:{fieldName:le.b[e].label}})})}),e.length>0||t.length>0||Object(le.a)({formData:f,formStateType:p})||!i)return;const r=Object(ue.d)({environment:a,formState:u,formData:Object(le.i)(f)});if(!r)return void ge.showErrorMessage(n()(c.FormattedMessage,{id:"developerIntegrationsForm.error.submission",defaultMessage:"There was an error submitting your integration. Please try again or contact support if the issue persists."}));o&&o(r);const s=document.querySelector(".".concat(me.w));s&&s.scrollIntoView({behavior:"smooth"})},300);return n()(w,{submitType:p,onSubmit:h},void 0,le.j.map(e=>le.c[e].supportedBy[p]?n()("div",{style:{marginBottom:24}},e,n()(se.a,{keyName:e}),le.c[e].fields.map(e=>{const{supportedBy:o,label:a,subtitle:i}=le.b[e];if(o[p]){const o=fe[e];return n()(de,{label:a,subtitle:i,error:f[e].error},e,n()(o,{autoFocus:Boolean(r&&"name"===e),spaces:y,currentValue:f[e].value,setErrorValue:t=>{v({field:e,error:t})},setNewValue:o=>{"submission_type"!==e?"client_secret"!==e&&"token"!==e&&v({value:o,field:e}):t.updateRecordTypeOnSubmission(o)}}))}return null})):null))}o.d(t,"a",(function(){return be}));const fe={token:function(e){const{currentValue:t,setErrorValue:o}=e,[{currentUserStore:r}]=Object(m.b)(b.default),a=Object(O.b)(),i=Object(m.a)(()=>{if(!r||!t)return;if(t.value.parent_table!==ce.a)return;const e=v.a.createChildStore(r,{id:t.value.parent_id,table:t.value.parent_table});return Object(te.getSpaceName)(a,e)},[r,t,a]);if(!t)return null;return d.a.createElement(d.a.Fragment,null,n()(R,{fetchSecret:async()=>{const e=await E.getBotToken(a,{botId:t.value.id});return"success"===e.type?(ne.Ib(a,{table:t.table}),{secret:e.data.token}):{error:e}},secretName:n()(c.FormattedMessage,{id:"developerIntegrationForm.botToken.secretName",defaultMessage:"token"}),onCopy:()=>{ne.Ab(a,{table:t.table,from:"developer-integrations-view"})},onError:o}),i&&n()("div",{style:{fontSize:15,color:S.h.frontTextLight}},void 0,n()(c.FormattedMessage,{id:"developerIntegrationForm.botToken.subtitle",defaultMessage:"Only works with the <bold>{spaceName}</bold> workspace. To change workspace, <developertermslink>create another integration</developertermslink>.",values:{spaceName:i,bold:(...e)=>n()("b",{},void 0,e),developertermslink:(...e)=>n()(M.a,{href:F.d.myIntegrations},void 0,e)}})))},client_id:function(e){const{currentValue:t}=e,o=Object(O.b)(),[r,i]=d.a.useState(!1);if(!t)return null;const s=n()(c.FormattedMessage,r?{defaultMessage:"ID copied",id:"developerIntegrationsForm.clientIdCopied.tooltip"}:{defaultMessage:"Copy client ID",id:"developerIntegrationsForm.copyClientId.tooltip"});return n()(k.b,{type:"text",disabled:!0,style:{color:S.h.frontTextMedium,fontFamily:j.a.fontFamily.mono},value:t.value.id,right:n()("div",{style:{display:"flex"}},void 0,n()("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),n()(C.a,{placement:C.a.Placement.Top,renderTooltip:()=>s,render:e=>d.a.createElement(B.a,a()({onClick:e=>{e.preventDefault(),i(!0),setTimeout(()=>{i(!1)},1500),Object(T.c)({environment:o,stringValue:t.value.id})}},e,{style:{display:"inline-flex",alignItems:"center",borderRadius:3,padding:"0 6px",height:24,color:r?S.h.frontTextMedium:S.h.blue,fontFamily:j.a.fontFamily.sans}}),n()(c.FormattedMessage,r?{id:"developerIntegrationsForm.copiedId.label",defaultMessage:"Copied"}:{id:"developerIntegrationsForm.copyId.label",defaultMessage:"Copy"}))}))})},client_secret:function(e){const{currentValue:t,setErrorValue:o}=e,r=Object(O.b)(),[{currentUserStore:a}]=Object(m.b)(b.default);if(!t||!a)return null;const i=t.value.info.has_viewed_secret,s=Object(f.c)(a,{id:t.value.id,table:p.a});return n()(R,{fetchSecret:async()=>{const e=await E.getIntegrationSecret(r,{integrationId:t.value.id});return"success"===e.type?(Object(ue.c)({environment:r,integrationStore:s}),ne.Ib(r,{table:t.table}),{secret:e.data.secret}):{error:e}},secretName:n()(c.FormattedMessage,{id:"developerIntegrationForm.integrationSecret.secretName",defaultMessage:"secret"}),onCopy:()=>{ne.Ab(r,{table:t.table,from:"developer-integrations-view"})},onError:o,hasSecretBeenViewed:i,confirmationModalProps:{title:n()(c.FormattedMessage,i?{id:"developerIntegrationForm.clientSecret.confirmationModal.title",defaultMessage:"Refresh OAuth client secret?"}:{id:"developerIntegrationForm.clientSecret.confirmationModal.title",defaultMessage:"Show OAuth client secret?"}),message:n()(c.FormattedMessage,i?{id:"developerIntegrationForm.clientSecret.confirmationModal.message",defaultMessage:"You’ve already viewed the client secret. Viewing again will revoke and generate a new one. Make sure you’re storing the secret securely."}:{id:"developerIntegrationForm.clientSecret.confirmationModal.message",defaultMessage:"This client secret will only be displayed once and cannot be viewed again. Make sure you’re storing the secret securely."})}})},name:ve,icon:function(e){const{currentValue:t,setNewValue:o,setErrorValue:r}=e;return n()(Z,{value:t,setValue:o,setError:r})},space:function(e){const{spaces:t,currentValue:o,setNewValue:r,setErrorValue:a}=e,[i,s]=d.a.useState(!1);return Object(l.useEffect)(()=>{i||0!==t.length||(s(!0),a(n()(c.FormattedMessage,{id:"developerIntegrationsForm.spacePicker.missingSpacesError",defaultMessage:"You are not an admin of any workspaces. Please <linktonotion>create a new one</linktonotion> or ask your space administrator to update your access.",values:{linktonotion:(...e)=>n()(M.a,{href:Object(pe.a)("guides.joinOrCreateWorkspace")},void 0,e)}})))},[t,a,i]),n()(X,{keyName:"space",items:t,value:o,setValue:r,renderMenuItem:e=>d.a.createElement(ie,e)})},submission_type:function(e){const{currentValue:t,setNewValue:o}=e,r=Object(O.b)();if(!t)return null;return n()(z,{options:[{key:u.a,title:n()(c.FormattedMessage,{id:"developerInternalIntegraion.integrationType.bot.title",defaultMessage:"Internal integration"}),caption:n()(c.FormattedMessage,{id:"developerInternalIntegraion.integrationType.bot.caption",defaultMessage:"Only available for workspaces you’re an admin of. The integration can be installed to those workspaces automatically and does not require review."})},{key:p.a,title:n()(c.FormattedMessage,{id:"developerInternalIntegraion.integrationType.integration.title",defaultMessage:"Public integration"}),caption:n()(c.FormattedMessage,{id:"developerInternalIntegraion.integrationType.integration.caption",defaultMessage:"Available for any Notion user. May require review and verification for listing in the Integration Gallery."})}],value:t,setValue:e=>{o(e),ne.Gb(r,{table:e})}})},redirect_uri:ve,website_url:ve,tagline:ve,privacy_policy_url:ve,terms_of_use_url:ve,email:ve};function ve(e){const{autoFocus:t,currentValue:o,setNewValue:r}=e;return n()(k.b,{autoFocus:t,style:{background:S.h.white,height:32,fontSize:15},value:o,onChange:e=>r(e.target.value)})}},MjR8:function(e,t,o){"use strict";var r=o("G+Ai"),a=o("CQbt"),i=o("LEzx");class n extends i.a{getInitialState(){return{type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:r.a}}updateRecordTypeOnSubmission(e){"create-integration"===this.state.type&&e===r.a&&this.setState({type:"update-bot",startingRecord:this.state.startingRecord,recordTypeOnSubmission:r.a}),"update-bot"===this.state.type&&e===a.a&&this.setState({type:"create-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:a.a})}initializeNewForm(e){e.table===r.a&&this.setState({type:"update-bot",startingRecord:e,recordTypeOnSubmission:r.a}),e.table===a.a&&this.setState({type:"update-integration",startingRecord:e,recordTypeOnSubmission:a.a})}}t.a=n},"V+m5":function(e,t,o){"use strict";o.d(t,"a",(function(){return g})),o.d(t,"b",(function(){return m}));var r=o("gcR/"),a=o.n(r),i=(o("3bBZ"),o("q1tI")),n=o.n(i),s=o("zmp8"),l=o("Sb6f"),d=o("iz/I"),c=o("FkPB"),u=o("d9nj");function p(e){return"developer-integration-section-header-".concat(e)}function g(e){const{keyName:t}=e;return a()("div",{id:p(t),style:{fontSize:30,fontWeight:l.a.fontWeight.bold,marginTop:24,marginBottom:24}},void 0,d.c[t].title)}function m(e){const{type:t}=Object(c.c)(e.integrationFormStore),o=d.j.filter(e=>d.c[e].supportedBy[t]),[r,i]=n.a.useState(),g=r||o[0];return a()("div",{style:{display:"grid",gridTemplate:"none | auto | auto",marginTop:24,position:"sticky",top:16}},void 0,o.map(e=>a()("div",{},e,a()(u.a,{style:{fontSize:15,height:28,marginTop:4,color:s.h.frontTextLight,width:"100%",...g===e&&{color:s.h.frontText,fontWeight:l.a.fontWeight.medium}},onClick:()=>{const t=document.getElementById(p(e));t&&t.scrollIntoView(),i(e)}},void 0,d.c[e].title))))}},"iz/I":function(e,t,o){"use strict";var r=o("gcR/"),a=o.n(r),i=(o("3bBZ"),o("q1tI"),o("J9+s")),n=o("G4cA"),s=o("VhAz"),l=o("FUUC"),d=o("S26v");var c=o("A9TN"),u=o("WLsh");o.d(t,"j",(function(){return p})),o.d(t,"c",(function(){return g})),o.d(t,"b",(function(){return m})),o.d(t,"d",(function(){return f})),o.d(t,"e",(function(){return v})),o.d(t,"h",(function(){return y})),o.d(t,"g",(function(){return h})),o.d(t,"f",(function(){return S})),o.d(t,"a",(function(){return _})),o.d(t,"i",(function(){return w}));const p=["secrets","basic","oauth"],g={secrets:{title:a()(i.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.secrets",defaultMessage:"Secrets"}),supportedBy:{"create-bot":!1,"update-bot":!0,"create-integration":!0,"update-integration":!0},fields:["token","client_id","client_secret"]},basic:{title:a()(i.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.basic",defaultMessage:"Basic information"}),supportedBy:{"create-bot":!0,"update-bot":!0,"create-integration":!0,"update-integration":!0},fields:["name","icon","space","submission_type"]},oauth:{title:a()(i.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.oauth",defaultMessage:"OAuth Domain & URIs"}),supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},fields:["redirect_uri","website_url","tagline","privacy_policy_url","terms_of_use_url","email"]}},m={token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-integration":!0,"update-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(i.FormattedMessage,{id:"developerIntegrationForm.botToken.label",defaultMessage:"Internal Integration Token"})},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(i.FormattedMessage,{id:"developerIntegrationForm.integrationClientId.label",defaultMessage:"OAuth client ID"})},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(i.FormattedMessage,{id:"developerIntegrationForm.integrationSecret.label",defaultMessage:"OAuth client secret"})},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-integration":!0,"update-integration":!0},label:a()(i.FormattedMessage,{id:"developerIntegrationForm.name.label",defaultMessage:"Name"}),subtitle:a()(i.FormattedMessage,{id:"developerIntegrationForm.name.subtitle",defaultMessage:"Name to identify your integration to users."})},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(i.FormattedMessage,{id:"developerIntegrationForm.icon.label",defaultMessage:"Logo"}),subtitle:a()(i.FormattedMessage,{id:"developerIntegrationForm.icon.subtitle",defaultMessage:"512px x 512px in PNG format is recommended."})},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-integration":!1,"update-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(i.FormattedMessage,{id:"developerIntegrationForm.space.label",defaultMessage:"Associated workspace"}),subtitle:a()(i.FormattedMessage,{id:"developerIntegrationForm.space.subtitle",defaultMessage:"Select a workspace to install the integration to. You can upgrade the integration to use OAuth later."})},submission_type:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-integration":!0,"update-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(i.FormattedMessage,{id:"developerIntegrationForm.submissionType.label",defaultMessage:"Integration type"})},redirect_uri:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:a()(i.FormattedMessage,{id:"developerIntegrationForm.redirect_uri.label",defaultMessage:"Redirect URI"}),subtitle:a()(i.FormattedMessage,{id:"developerIntegrationForm.redirect_uri.subtitle",defaultMessage:"Users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL framents, relative paths or wildcards, and can’t be a public IP address."})},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:a()(i.FormattedMessage,{id:"developerIntegrationForm.website_url.label",defaultMessage:"Website or homepage"}),subtitle:a()(i.FormattedMessage,{id:"developerIntegrationForm.website_url.subtitle",defaultMessage:"Used to link to your integration’s website or homepage in your integration page and authentication screens."})},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(i.FormattedMessage,{id:"developerIntegrationForm.tagline.label",defaultMessage:"Tagline"}),subtitle:a()(i.FormattedMessage,{id:"developerIntegrationForm.tagline.subtitle",defaultMessage:"A short description of what the integration does."})},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:a()(i.FormattedMessage,{id:"developerIntegrationForm.privacy_policy_url.label",defaultMessage:"Privacy policy"}),subtitle:a()(i.FormattedMessage,{id:"developerIntegrationForm.privacy_policy_url.subtitle",defaultMessage:"Used to link to your integration’s privacy policy in your integration page and authentication screens."})},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:a()(i.FormattedMessage,{id:"developerIntegrationForm.terms_of_use_url.label",defaultMessage:"Terms of use"}),subtitle:a()(i.FormattedMessage,{id:"developerIntegrationForm.terms_of_use_url.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens."})},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:a()(i.FormattedMessage,{id:"developerIntegrationForm.email.label",defaultMessage:"Support email"}),subtitle:a()(i.FormattedMessage,{id:"developerIntegrationForm.email.subtitle",defaultMessage:"Used to link to your integration’s support email in your integration page and authentication screens."})}},b={value:void 0,error:void 0},f={token:b,client_id:b,client_secret:b,name:b,icon:b,space:b,submission_type:b,tagline:b,email:b,website_url:b,privacy_policy_url:b,terms_of_use_url:b,redirect_uri:b};function v(e,t){return"error"in t?{...e,[t.field]:{...e[t.field],error:t.error}}:{...e,[t.field]:{...e[t.field],...t.value&&{error:void 0},value:t.value}}}function y(e){const{userRootStore:t,formStoreState:o}=e;if("create-bot"===o.type){return{token:void 0,client_id:void 0,client_secret:void 0,name:void 0,icon:void 0,space:(t?t.getAdminSpaceStores():[])[0],submission_type:o.recordTypeOnSubmission,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,redirect_uri:void 0}}if("update-bot"===o.type||"create-integration"===o.type){const e=o.startingRecord.value,r=t&&n.a.createChildStore(t,{id:e.parent_id,table:l.a});return{token:o.startingRecord,client_id:void 0,client_secret:void 0,name:e.name,icon:e.icon,space:r,submission_type:o.recordTypeOnSubmission,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,redirect_uri:void 0}}if("update-integration"===o.type){const e=o.startingRecord.value;return{token:void 0,client_id:o.startingRecord,client_secret:o.startingRecord,name:e.name,icon:e.info.icon,space:void 0,submission_type:o.recordTypeOnSubmission,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,redirect_uri:e.redirect_uris[0]}}Object(s.e)(o)}function h(e){const{formData:t,formStateType:o}=e,r=[];for(const a of Object(s.c)(m)){const e=t[a].value;m[a].requiredBy[o]&&!e&&r.push(a)}return r}function M(e){const t=d.i({str:e,allowNoProtocol:!1});return!!t&&!!d.e(t).hostname}const F={email:function(e){const t=u.c(e);return!!t&&u.d(t)},redirect_uri:e=>function(e,t){const o=d.i({str:t,allowNoProtocol:!1});if(!o)return!1;const r=d.e(o);if(!r.hostname)return!1;if("http:"===r.protocol&&"localhost"===r.hostname)return!0;if("https:"!==r.protocol)return!1;const{hostname:a}=d.e(e);if(!a)return!1;const i=a.split(".").slice(-2,-1).join("."),n="".concat(i,".so"),s="".concat(i,".com");return r.hostname!==n&&!r.hostname.endsWith(".".concat(n))&&r.hostname!==s&&!r.hostname.endsWith(".".concat(s))}(c.default.baseURL,e),website_url:M,privacy_policy_url:M,terms_of_use_url:M};function S(e){const{formData:t,formStateType:o}=e,r=[];for(const a of Object(s.c)(t)){const e=t[a].value,i=m[a].supportedBy[o],n=F[a];i&&e&&n&&(n(e)||r.push(a))}return r}function _(e){const{formData:t,formStateType:o}=e;return Object(s.c)(t).some(e=>m[e].supportedBy[o]&&t[e].error)}function w(e){return{token:e.token.value,client_id:e.client_id.value,client_secret:e.client_secret.value,name:e.name.value,icon:e.icon.value,space:e.space.value,submission_type:e.submission_type.value,redirect_uri:d.i({str:e.redirect_uri.value,allowNoProtocol:!1}),website_url:d.i({str:e.website_url.value,allowNoProtocol:!1}),tagline:e.tagline.value,privacy_policy_url:d.i({str:e.privacy_policy_url.value,allowNoProtocol:!1}),terms_of_use_url:d.i({str:e.terms_of_use_url.value,allowNoProtocol:!1}),email:u.c(e.email.value)}}},uk6B:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return p}));var r=o("gcR/"),a=o.n(r),i=(o("3bBZ"),o("q1tI"),o("rz7l")),n=o("J9+s"),s=o("7M94"),l=o("EbD0"),d=o("V+m5"),c=o("FkPB"),u=o("MjR8");function p(e){const{onClose:t,onSuccess:o}=e,[,,r]=Object(c.b)(void 0,u.a);return a()(i.a,{className:s.u,title:a()(n.FormattedMessage,{id:"developerIntegrationsCreateInternal.title.label",defaultMessage:"Create a new integration"}),subtitle:a()(n.FormattedMessage,{id:"developerIntegrationsCreateInternal.subtitle.label",defaultMessage:"We’ll walk you through how to setup a new integration."}),onNavigateBack:t,sideContent:a()(d.b,{integrationFormStore:r})},void 0,a()(l.a,{onCreateNew:o,integrationFormStore:r,shouldAutoFocusFirstField:!0}))}},xr9c:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return F}));var r=o("gcR/"),a=o.n(r),i=(o("3bBZ"),o("q1tI")),n=o("Zo/l"),s=o("S1wt"),l=o("FkPB"),d=o("QcDD"),c=o("5jDe"),u=o("rz7l"),p=o("J9+s"),g=o("7M94"),m=o("G+Ai"),b=o("Oy36"),f=o("EbD0"),v=o("y6Dp"),y=o("V+m5"),h=o("MjR8"),M=o("enKW");function F(e){const{botOrIntegrationPointer:t}=e,o=Object(n.b)(),[{currentUserStore:r}]=Object(l.b)(d.default),[,,F]=Object(l.b)(void 0,h.a),S=Object(l.a)(()=>{if(t&&r){const e=r.getRecordValue(t);if(e)return{value:e,table:t.table}}},[r,t]);if(Object(i.useEffect)(()=>{S&&(F.initializeNewForm(S),v.Jb(o,{table:S.table}))},[F,o,S]),!r||!S)return a()(c.a,{});const _=S.value.name,w=S.table===m.a?S.value.icon:S.value.info.icon,I={id:S.value.id,table:S.table},k=w?{pointer:I,icon:w}:void 0;return a()(u.a,{className:g.v,title:_,subtitle:a()(p.FormattedMessage,{id:"developerIntegrationView.subtitle.label",defaultMessage:"Review and edit integration information."}),onNavigateBack:()=>Object(s.b)(o),icon:a()(b.a,{disabled:!0,icon:k,title:_,isEmptyPage:!1,size:98,isLarge:!0,style:{boxShadow:M.a.frontDeepShadow},useInvertedColors:!0}),sideContent:a()(y.b,{integrationFormStore:F})},void 0,a()(f.a,{integrationFormStore:F}))}}}]);